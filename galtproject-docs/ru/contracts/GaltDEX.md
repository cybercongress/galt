# Контракт GaltDEX - Требования

## Цели контракта
- обеспечить возможность автоматического расчета курса и обмена токенов GALT на ETH и обратно без ограничения.

## Сценарий 1: Создание токенов GALT и отправка на контракт GaltDEX

1. Galt Space или Galt Core вызывает метод контракта Galt Token mint() и создает необходимое количество токенов Galt. В параметре `to` указывается адрес контракта GaltDEX.

## Сценарий 2: Определение начального курса обмена GALT на ETH

1. Galt Space или Galt Core определяет начальный курс обмена для первой транзакции при деплое контракта.

2. После выполнения первой транзакции курс начинается определяться динамично.

## Сценарий 3: Определение комиссии и получателя комиссии за обмен

1. При деплое контракта определяется адрес, который получает комиссию за обмен и размер этой комиссии в процентах.

2. Комиссия и получатель могут быть изменены владельце контракта путем выполнения метода.

## Сценарий 4: Покупка GALT первым покупателем 

1. Любой может отправить на контракт Эфиры.

2. Контракт по фиксированному курсу отправит отправителю Эфиров токены Galt. В данному случае используется курс, установленный при деплое.

3. Если комиссия не равна 0, то она фиксируется в ETH.

## Сценарий 5: Покупка GALT покупателем 

1. Если первая транзакция уже совершена, то курс рассчитывается динамически для каждой транзакции.

2. Курс рассчитывается по формуле (TotalSupply GALT - Баланс GALT контракта GaltDEX)/ Баланс ETH контракта GaltDEX.

3. Пользователь отправляет ETH на контракт и получает GALT по текущем курсу.

4. Если комиссия не равна 0, то она фиксируется в ETH.


## Сценарий 6: Продажа GALT покупателем 

1. Аналогично покупке.

2. Если комиссия не равна 0, то она фиксируется в GALT.

## Сценарий 7: Вывод ETH и GALT с контракта

1. Вывод ETH и GALT с контракта невозможен.

## Сценарий 8: Получение комиссии за обменные операции

1. Получатель комиссии может вызвать метод и получить комисси в GALT и ETH.

## Сценарий UX 1: Изменение комиссии за обмен

1. В меню Администрирование есть кнопка `Комиссию за обмен`. Кнопка доступна владельцу контракта.

2. При нажатии кнопки отображаются поля:

|Поле|Тип|Значение|
|-----|------|-----|
|Адрес получателя комиссии|Адрес|Текущий получатель комиссии из контракта|
|Покупка GALT в ETH|0|Текущая коммиссия на каждую покупку GALT|
|Продажа GALT в ETH|2%|Текущая коммиссия на каждую продажу GALT|
|Покупка GALT в GALT|0|Текущая коммиссия на каждую покупку GALT|
|Продажа GALT в GALT|0%|Текущая коммиссия на каждую продажу GALT|

3. Если пользователь меняет данные становится активной кнопка Подтвердить. При ее нажатии создается транзакция с вызовом метода контракта GaltDEX. При выполнении транзакции данные изменяются и поля обновляются.

4. Комиссия на кажду обменную операцию устанавливается в двух токенах: ETH и GALT.

## Сценарий UX 2: Покупка GALT

1. Для любого пользователя доступна кнопка `Купить GALT`.

2. Если пользователь нажимает кнопку, то он попадает в раздел меню. Ему отображается текущий курс из контракта и размер комиссии. Так же отображается количество  GALT и Эфиров на балансе пользователя.

3. Отображается поле Количество GALT для покупки. При вводе в поле значания сразу отображается стоимость в эфирах.

4. Отображается кнопка Получить. При ее нажатии создается транзакция, которая вызывает метод контракта GaltDEX. После выполнения транзакции Пользователь получает GALT. Контракт получает ETH. Начисляется комиссия.

## Сценарий UX 3: Продажа GALT

1. Для любого пользователя доступна кнопка `Продать GALT`.

2. Если пользователь нажимает кнопку, то он попадает в раздел меню. Ему отображается текущий курс из контракта и размер комиссии. Так же отображается количество  GALT и Эфиров  на балансе пользователя.

3. Отображается поле Количество GALT для продажи. При вводе в поле значания сразу отображается стоимость в эфирах.

4. Отображается кнопка Продать. При ее нажатии создается транзакция, которая вызывает метод контракта GaltDEX. После выполнения транзакции Пользователь получает ETH. Токены GALT получает контракт GaltDEX. Начисляется комиссия.

## Сценарий UX 4: Вывод комиссии

1. Если Адрес является получателем комиссии, то для него отображается кнопка `Моя комиссия за обмен`.

2. Если ползователь нажал кнопку, то он видит Сумму комисии в ETH и GALT, которая была начислена.

3. Кнопка `Получить комиссию` - при нажатии создается транзакция с методом контракта GaltDEX. Пользователь получаети начисленную комиссию.

# Бэклог

1. Рассмотреть возможность дать право на mint() . контракту при получении ETH.



